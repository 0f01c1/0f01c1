---
import type { CollectionEntry } from 'astro:content';
import FormattedDate from './FormattedDate.astro';
import TagLink from './TagLink.astro';
import readingTime from 'reading-time';

type Props = {
  post: CollectionEntry<'blog'>;
};

const { post } = Astro.props;
const { Content } = await post.render();
const stats = readingTime(post.body);
---

<div class="flex gap-2 justify-between border-b pb-4">
  <div class="flex flex-col gap-4">
    <a class="font-bold text-lg" href={`/blog/${post.slug}`}>
      {post.data.title}
    </a>
    <div class="flex items-center gap-2">
      <FormattedDate date={post.data.pubDate} />
      <span class="text-gray-500 dark:text-gray-400 text-xs font-medium">/</span>
      <span class="text-gray-500 dark:text-gray-400 text-xs font-medium tracking-wide">{stats.text}</span>
    </div>
    <div class="flex gap-2">
      {post.data.tags?.map((tag) => {
        return <TagLink tag={tag} />;
      })}
    </div>
  </div>
  <a href={`/blog/${post.slug}`}>
    <img
      src={post.data.heroImage}
      alt=""
      class="w-40 h-24 bg-contain border border-gray-200"
    />
  </a>
</div>
